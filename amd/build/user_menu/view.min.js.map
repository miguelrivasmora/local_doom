{"version":3,"file":"view.min.js","sources":["../../src/user_menu/view.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * View functions for the forum UI.\n *\n * @module     local_contact_form/user_menu/view\n * @copyright  2024 ADSDR Scepter Team\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from \"jquery\";\nimport { SELECTORS } from \"./selectors\";\nimport { TEMPLATES } from \"./templates\";\nimport { getLang, setLang } from \"./config\";\nimport Template from \"core/templates\";\n\n/**\n * Renders the email-to-area tab content in the user menu.\n */\nfunction renderEmailToAreaTab() {\n  const userMenu = $(SELECTORS.CAROUSEL.MAIN);\n  if (userMenu.length === 0) {\n    return;\n  }\n  Template.render(TEMPLATES.ITEMS.EMAIL_TO_AREA, {\n    lang: getLang(),\n    moodleUrl: M.cfg.wwwroot,\n  })\n    .then((html) => {\n      const divider = userMenu.find(SELECTORS.DIVIDER.DROPDOWN).first();\n      if (divider.length) {\n        divider.before(html);\n      } else {\n        userMenu.append(html);\n      }\n    })\n    .catch((e) => {\n      console.error(e); // eslint-disable-line no-console\n    });\n}\n\n/**\n * Sets initial constants for the application.\n *\n * @param {string} lang The initial language code to set.\n */\nconst setInitialConstants = (lang) => {\n  setLang(lang);\n};\n\n/**\n * Init Module\n * @param {*} lang user lang\n */\nexport const init = (lang) => {\n  setInitialConstants(lang);\n  renderEmailToAreaTab();\n};\n"],"names":["lang","setInitialConstants","userMenu","SELECTORS","CAROUSEL","MAIN","length","render","TEMPLATES","ITEMS","EMAIL_TO_AREA","moodleUrl","M","cfg","wwwroot","then","html","divider","find","DIVIDER","DROPDOWN","first","before","append","catch","e","console","error","renderEmailToAreaTab"],"mappings":";;;;;;;wLAkEqBA,OARQA,CAAAA,2BACnBA,OAQRC,CAAoBD,uBAnCdE,UAAW,mBAAEC,qBAAUC,SAASC,MACd,IAApBH,SAASI,4BAGJC,OAAOC,qBAAUC,MAAMC,cAAe,CAC7CV,MAAM,qBACNW,UAAWC,EAAEC,IAAIC,UAEhBC,MAAMC,aACCC,QAAUf,SAASgB,KAAKf,qBAAUgB,QAAQC,UAAUC,QACtDJ,QAAQX,OACVW,QAAQK,OAAON,MAEfd,SAASqB,OAAOP,SAGnBQ,OAAOC,IACNC,QAAQC,MAAMF,MAmBlBG"}